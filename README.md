# Система управления задачами

Простое мобильное приложение на React Native (Expo) с сервером на Python Flask для управления задачами с двумя ролями: администратор и стажёр.

## Структура проекта

```
totododo/
├── backend/           # Flask сервер
│   ├── app.py        # Основной файл сервера
│   ├── requirements.txt
│   └── database.db   # SQLite база данных (создается автоматически)
├── mobile/           # React Native приложение
│   ├── App.js        # Главный файл приложения
│   ├── screens/      # Экраны приложения
│   │   ├── LoginScreen.js
│   │   ├── TaskListScreen.js
│   │   ├── CreateTaskScreen.js
│   │   └── CreateUserScreen.js
│   ├── app.json      # Конфигурация Expo
│   └── package.json
└── README.md
```

## Функциональность

### Роли пользователей

**Администратор:**
- Видит все задачи
- Создаёт новые задачи
- Назначает задачи стажёрам
- Может менять любой статус задачи
- Создаёт новых стажёров
- Экспортирует задачи в CSV

**Стажёр:**
- Видит только свои задачи
- Может менять статус задач:
  - `backlog` → `in_progress`
  - `in_progress` → `in_review`

### Статусы задач
- `backlog` - В очереди
- `in_progress` - В работе
- `in_review` - На проверке
- `done` - Выполнено

### Уведомления
- Стажёр получает уведомление за 24 часа до дедлайна
- Админ получает уведомление при смене статуса задачи стажёром

## Установка и запуск

### 1. Запуск сервера (Backend)

```bash
# Переход в папку backend
cd backend

# Установка зависимостей Python
pip install -r requirements.txt

# Запуск сервера
python app.py
```

Сервер будет доступен по адресу: `http://localhost:5001`

### 2. Запуск мобильного приложения

```bash
# Переход в папку mobile
cd mobile

# Установка зависимостей (если не установлены)
npm install

# Запуск приложения
npm start
```

Для запуска на устройстве:
- **iOS**: `npm run ios`
- **Android**: `npm run android`
- **Web**: `npm run web`

## Тестовые аккаунты

По умолчанию создаются следующие пользователи:

- **Администратор**: `admin` / `admin123`
- **Стажёр**: `intern1` / `intern123`

## API Endpoints

### Авторизация
- `POST /login` - Вход в систему

### Задачи
- `GET /tasks` - Получение списка задач
- `POST /tasks` - Создание новой задачи (только админ)
- `POST /tasks/status` - Изменение статуса задачи

### Пользователи
- `POST /users` - Создание нового стажёра (только админ)
- `GET /interns` - Получение списка стажёров (только админ)

### Экспорт
- `GET /export` - Экспорт задач в CSV (только админ)

## База данных

Используется SQLite с двумя таблицами:

### users
- `id` - Уникальный идентификатор
- `login` - Логин пользователя
- `password` - Пароль
- `role` - Роль (`admin` или `intern`)

### tasks
- `id` - Уникальный идентификатор
- `title` - Заголовок задачи
- `description` - Описание задачи
- `status` - Статус задачи
- `due_date` - Дедлайн
- `assigned_to` - ID назначенного пользователя
- `created_at` - Дата создания

## Технологии

**Backend:**
- Python 3.x
- Flask
- SQLite

**Mobile:**
- React Native
- Expo
- Expo Notifications
- React Navigation
- AsyncStorage

## Особенности

- Простой интерфейс без кастомных компонентов
- Локальные уведомления через Expo Notifications
- Автоматическое создание базы данных при первом запуске
- Поддержка экспорта данных в CSV
- Проверка прав доступа на уровне API
- Сохранение сессии пользователя в AsyncStorage

## Разработка

Для разработки рекомендуется:

1. Запустить сервер в режиме отладки
2. Использовать Expo Go для тестирования на реальном устройстве
3. Проверить работу уведомлений на физическом устройстве (симулятор может не поддерживать все функции)

## Ограничения

- Нет сложной авторизации (JWT не используется)
- Пароли хранятся в открытом виде (для упрощения)
- Нет регистрации пользователей через приложение
- Локальная база данных SQLite
- Простой интерфейс без продвинутых UI компонентов